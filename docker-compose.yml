services:
  nodeweb:
    build:
      context: ./docker/nodeweb
      dockerfile: ./Dockerfile
    image: nodewebimage
    container_name: nodewebcontainer
    volumes:
      - ./:/app
    ports:
      # develop
      - 8081:81
    command: "run dev"
  nodewebprd:
    build:
      context: ./docker/nodeweb
      dockerfile: ./Dockerfile
    image: nodewebimage
    container_name: nodewebprdcontainer
    volumes:
      - ./:/app
    ports:
      # production
      - 8080:80
    entrypoint: /bin/bash
    command: /app/run.sh
  vite:
    build:
      context: ./docker/vite
      dockerfile: ./Dockerfile
    image: viteimage
    container_name: vitecontainer
    volumes:
      - ./src/frontend:/app
    ports:
      - 5173:5173
    command: "run dev"